<!doctype html>

<html lang="en">
<head>
	<meta charset="utf-8">

	<title>Search Widget Examples</title>

	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/styles.css">
	<link rel="stylesheet" href="css/index.css">
	
	<style>

	
	</style>
</head>
<body>
	<header>
		<banner>
			<a class="skipnavlink offscreen" href="#main">
				Skip to main content
			</a>
			<div class="page-centered-content">
				<h1>Search Widget Examples</h1>
			</div>
			<nav id="main-nav" class="main-navigation">
				<ol class="page-centered-content">
				</ol>
			</nav>
		</banner>
	</header>
	<main id="main" class="page-centered-content">
		<div id="main-content">
		
			<h2>Select Approach</h2>
			<form action="https://syracuse.summon.serialssolutions.com/" id="summon-1" method="GET">
				<span class="offscreen">SUMMON Search at SU Libraries:</span>
				<label>
					<span class="offscreen">Search for: </span>
					<input name="q" type="text" placeholder="Search text" /> 
				</label>
				<label for="summon-lang-1" class="offscreen">Language:</label>
				<select id="summon-lang-1" name="summon-lang-1">
					<option selected value="">Any Language</option>
					<option value="English">English</option>
					<option value="French">French</option>
					<option value="Spanish">Spanish</option>
				</select>
				<button type="submit" class="summon-search-submit">Search</button>
			</form>

			<h2>Radio Button Obvious Approach</h2>
			<form action="https://syracuse.summon.serialssolutions.com/" id="summon-2" method="GET">
				<span class="offscreen">SUMMON Search at SU Libraries:</span>
				<label>
					<span class="offscreen">Search for: </span>
					<input name="q" type="text" placeholder="Search text" /> 
				</label>
				<div id="summon-lang-2">
					<label>
						<input type="radio" id="sl-lang-2-any" name="summon-lang-2" value="" checked /> 
						Any Language
					</label>
					<label>
						<input type="radio" id="sl-lang-2-English" name="summon-lang-2" value="English" />English
					</label>
					<label>
						<input type="radio" id="sl-lang-2-French" name="summon-lang-2" value="French" />French
					</label>
					<label>
						<input type="radio" id="sl-lang-2-Spanish" name="summon-lang-2" value="Spanish" />
						Spanish
					</label>
				</div>
				<button type="submit" class="summon-search-submit">Search</button>
			</form>
			
			
			<h2>Radio Button Stylized Approach</h2>
			<form action="https://syracuse.summon.serialssolutions.com/" id="summon-3" method="GET">
				<span class="offscreen">SUMMON Search at SU Libraries:</span>
				<label>
					<span class="offscreen">Search for: </span>
					<input name="q" type="text" placeholder="Search text" /> 
				</label>
				<div id="summon-lang-3">
					<label>
						<input type="radio" id="sl-lang-3-any" name="summon-lang-3" value="" checked /> 
						Any Language
					</label>
					<label>
						<input type="radio" id="sl-lang-3-English" name="summon-lang-3" value="English" />English
					</label>
					<label>
						<input type="radio" id="sl-lang-3-French" name="summon-lang-3" value="French" />French
					</label>
					<label>
						<input type="radio" id="sl-lang-3-Spanish" name="summon-lang-3" value="Spanish" />
						Spanish
					</label>
				</div>
				<button type="submit" class="summon-search-submit">Search</button>
			</form>
		</div>
	</main>
	<footer>
		<div class="page-centered-content">
			Follow this project on <a href="https://github.com/">GitHub</a>: 
			<a href="https://github.com/metageeky/menu-examples">
				https://github.com/metageeky/menu-examples
			</a>
		</div>
	</footer>
	
	<script>
		window.onload = function() {
			console.log('loaded: ' + Date.now());
			updateLanguage(document.getElementById('summon-lang-1'));
			document.getElementById('summon-lang-1').addEventListener('change', (event) => {
				updateLanguage(event.target);
			});
			
			updateLanguage(document.querySelector('input[name="summon-lang-2"]:checked'));
			for(let radio of document.querySelectorAll('input[name="summon-lang-2"]')) {
				radio.addEventListener('change', (event) => {
					updateLanguage(event.target);
				});
			}

			updateLanguage(document.querySelector('input[name="summon-lang-3"]:checked'));
			for(let radio of document.querySelectorAll('input[name="summon-lang-3"]')) {
				radio.addEventListener('change', (event) => {
					updateLanguage(event.target);
				});
			}

		}
		function updateLanguage(e) {
			// get the form
			let f = e.parentElement;
			while(f.tagName !== 'FORM')
				f = f.parentElement;
			// add/remove the hidden input magic
			let fvf = f.querySelector('input[name="fvf"]');
			switch(e.value) {
				case '':
					if(fvf !== null)
						fvf.remove();
					break;
				default:
					if(fvf === null) {
						fvf = document.createElement('input');
						fvf.type = 'hidden';
						fvf.name = 'fvf';
						f.appendChild(fvf);
					}
					fvf.value = 'Language,' + e.value;
					
			}
		}
		
	</script>

</body>
</html>